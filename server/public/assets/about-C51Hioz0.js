import{H as e,L as t,N as n,Q as r,S as i,U as a,V as o,a as s,h as c,i as l,n as u,nt as d,q as f,r as p,t as m,w as h}from"./about-BIsbO151.js";var g=f(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),_,v=({go:t,name:a,setName:f,showTips:m,tips:h})=>{let[v,y]=d(``),[b,x]=d(0),[S,C]=d(!0),w=async()=>{C(!1),x(60),_=setInterval(()=>{x(e=>e-1)<=0&&(clearInterval(_),_=void 0,C(!0))},1e3);try{switch((await i(a())).status){case n.BadRequest:return m(`请输入用户名`);case n.NotFound:return m(`未找到用户`);case n.FailedDependency:return m(`此用户未注册手机号码`);case n.TooEarly:return m(`请求OTP过于频繁`);case n.OK:return m(`OTP已发送`);default:m(`未知服务器错误`)}}catch{m(`网络错误`)}},T=async()=>{try{switch(await c(a(),v())){case n.BadRequest:return m(`请输入用户名和密码`);case n.NotFound:return m(`未找到用户`);case n.Unauthorized:return m(`错误的密码`);case n.OK:m(`已登录`),_&&clearInterval(_),location.reload();break;default:m(`未知服务器错误`)}}catch{m(`网络错误`)}};return r(u,{tips:h,class:`p-2 flex flex-col`,title:`登录`,get left(){return r(s,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>t(`#about`)})},get children(){var n=g(),i=n.firstChild.nextSibling,c=i.firstChild.nextSibling;return c.nextSibling,i.nextSibling,o(n,r(p,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[a,f]}),i),o(i,r(s,{class:`btn-anchor font-bold`,onClick:()=>t(`#signup`),children:`注册`}),c),o(n,r(p,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[v,y]}),null),o(n,r(s,{class:`btn-anchor block text-right mb-3`,onClick:w,get disabled(){return!S()},get children(){return[`Send One-Time Passcode `,e(()=>e(()=>b()>0)()?`(${b()})`:``)]}}),null),o(n,r(l,{class:`button btn-prime`,onClick:T,children:`登录`}),null),n}})},y=f(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),b=/^[_\w-]+$/,x=/^\+\d+$/,S=({go:e,name:t,setName:i,showTips:a,tips:c})=>{let[f,m]=d(``),g=()=>{e(`#signin`)},_=async()=>{if(!b.test(t()))return a(`Name can only include _, letter, number and -`);let r=f().replaceAll(/[() -]/g,``);if(!x.test(r))return a(`Invalid phone number!`);try{switch((await h(r,t())).status){case n.BadRequest:return a(`用户名已注册`);case n.Conflict:return a(`电话号码已注册`);case n.OK:return a(`注册成功，请登录`),e(`#signin`);default:a(`未知数服务器错误`)}}catch{a(`网络错误`)}};return r(u,{tips:c,class:`p-2 flex flex-col`,title:`注册`,get left(){return r(s,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>e(`#about`)})},get children(){var e=y(),n=e.firstChild.nextSibling,a=n.nextSibling;return a.firstChild,o(e,r(p,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[t,i],class:`mb-3`}),n),o(e,r(p,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[f,m],class:`mb-3`}),a),o(a,r(s,{class:`btn-anchor font-bold`,onClick:g,children:`登录`}),null),o(e,r(l,{class:`button btn-prime py-1`,onClick:_,children:`注册`}),null),e}})},C=()=>{let[e,n]=d(`#about`),[i,a]=d(``),[o,s]=d(``),c,l=e=>n(e??`#about`),u=()=>s(``),f=(e,t=!0)=>{s(e),t&&(c&&clearTimeout(c),c=setTimeout(u,3e3))},p=new Map;return p.set(`#about`,()=>r(m,{go:l})),p.set(`#signup`,()=>r(S,{go:l,name:i,setName:a,showTips:f,tips:o})),p.set(`#signin`,()=>r(v,{go:l,name:i,setName:a,showTips:f,tips:o})),r(t,{get component(){return p.get(e())}})};a(()=>r(C,{}),document.getElementById(`root`));