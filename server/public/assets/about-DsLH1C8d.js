import{$ as e,H as t,J as n,P as r,R as i,S as a,T as o,U as s,W as c,a as l,h as u,i as d,n as f,r as p,rt as m,t as h}from"./about-Kqb7zKwd.js";var g=n(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),_,v=({go:n,name:i,setName:o,showTips:c,tips:h})=>{let[v,y]=m(``),[b,x]=m(0),[S,C]=m(!0),w=async()=>{C(!1),x(60),_=setInterval(()=>{x(e=>e-1)<=0&&(clearInterval(_),_=void 0,C(!0))},1e3);try{switch((await a(i())).status){case r.BadRequest:return c(`请输入用户名`);case r.NotFound:return c(`未找到用户`);case r.FailedDependency:return c(`此用户未注册手机号码`);case r.TooEarly:return c(`请求OTP过于频繁`);case r.OK:return c(`OTP已发送`);default:c(`未知服务器错误`)}}catch{c(`网络错误`)}},T=async()=>{try{switch(await u(i(),v())){case r.BadRequest:return c(`请输入用户名和密码`);case r.NotFound:return c(`未找到用户`);case r.Unauthorized:return c(`错误的密码`);case r.OK:c(`已登录`),_&&clearInterval(_),location.reload();break;default:c(`未知服务器错误`)}}catch{c(`网络错误`)}};return e(f,{tips:h,class:`p-2 flex flex-col`,title:`登录`,get left(){return e(l,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>n(`#about`)})},get children(){var r=g(),a=r.firstChild.nextSibling,c=a.firstChild.nextSibling;return c.nextSibling,a.nextSibling,t(r,e(p,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[i,o]}),a),t(a,e(l,{class:`btn-anchor font-bold`,onClick:()=>n(`#signup`),children:`注册`}),c),t(r,e(p,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[v,y]}),null),t(r,e(l,{class:`btn-anchor block text-right mb-3`,onClick:w,get disabled(){return!S()},get children(){return[`Send One-Time Passcode `,s(()=>s(()=>b()>0)()?`(${b()})`:``)]}}),null),t(r,e(d,{class:`button btn-prime`,onClick:T,children:`登录`}),null),r}})},y=n(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),b=/^[_\w-]+$/,x=/^\+\d+$/,S=({go:n,name:i,setName:a,showTips:s,tips:c})=>{let[u,h]=m(``),g=()=>{n(`#signin`)},_=async()=>{if(!b.test(i()))return s(`Name can only include _, letter, number and -`);let e=u().replaceAll(/[() -]/g,``);if(!x.test(e))return s(`Invalid phone number!`);try{switch((await o(e,i())).status){case r.BadRequest:return s(`用户名已注册`);case r.Conflict:return s(`电话号码已注册`);case r.OK:return s(`注册成功，请登录`),n(`#signin`);default:s(`未知数服务器错误`)}}catch{s(`网络错误`)}};return e(f,{tips:c,class:`p-2 flex flex-col`,title:`注册`,get left(){return e(l,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>n(`#about`)})},get children(){var n=y(),r=n.firstChild.nextSibling,o=r.nextSibling;return o.firstChild,t(n,e(p,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[i,a],class:`mb-3`}),r),t(n,e(p,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[u,h],class:`mb-3`}),o),t(o,e(l,{class:`btn-anchor font-bold`,onClick:g,children:`登录`}),null),t(n,e(d,{class:`button btn-prime py-1`,onClick:_,children:`注册`}),null),n}})},C=()=>{let[t,n]=m(`#about`),[r,a]=m(``),[o,s]=m(``),c,l=e=>n(e??`#about`),u=()=>s(``),d=(e,t=!0)=>{s(e),t&&(c&&clearTimeout(c),c=setTimeout(u,3e3))},f=new Map;return f.set(`#about`,()=>e(h,{go:l})),f.set(`#signup`,()=>e(S,{go:l,name:r,setName:a,showTips:d,tips:o})),f.set(`#signin`,()=>e(v,{go:l,name:r,setName:a,showTips:d,tips:o})),e(i,{get component(){return f.get(t())}})};c(()=>e(C,{}),document.getElementById(`root`));