import{H as e,L as t,N as n,Q as r,S as i,T as a,U as o,V as s,a as c,h as l,i as u,n as d,nt as f,q as p,r as m,t as h}from"./about-BC_w6FJP.js";var g=p(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><div class="text-right mb-3">尚未<!>?</div><label for=code>临时密码`),_,v=({go:t,name:a,setName:o,showTips:p,tips:h})=>{let[v,y]=f(``),[b,x]=f(0),[S,C]=f(!0),w=async()=>{C(!1),x(60),_=setInterval(()=>{x(e=>e-1)<=0&&(clearInterval(_),_=void 0,C(!0))},1e3);try{switch((await i(a())).status){case n.BadRequest:return p(`请输入用户名`);case n.NotFound:return p(`未找到用户`);case n.FailedDependency:return p(`此用户未注册手机号码`);case n.TooEarly:return p(`请求OTP过于频繁`);case n.OK:return p(`OTP已发送`);default:p(`未知服务器错误`)}}catch{p(`网络错误`)}},T=async()=>{try{switch(await l(a(),v())){case n.BadRequest:return p(`请输入用户名和密码`);case n.NotFound:return p(`未找到用户`);case n.Unauthorized:return p(`错误的密码`);case n.OK:p(`已登录`),_&&clearInterval(_),location.reload();break;default:p(`未知服务器错误`)}}catch{p(`网络错误`)}};return r(d,{tips:h,class:`p-2 flex flex-col`,title:`登录`,get left(){return r(c,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>t(`#about`)})},get children(){var n=g(),i=n.firstChild.nextSibling,l=i.firstChild.nextSibling;return l.nextSibling,i.nextSibling,s(n,r(m,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[a,o]}),i),s(i,r(c,{class:`btn-anchor font-bold`,onClick:()=>t(`#signup`),children:`注册`}),l),s(n,r(m,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[v,y]}),null),s(n,r(c,{class:`btn-anchor block text-right mb-3`,onClick:w,get disabled(){return!S()},get children(){return[`Send One-Time Passcode `,e(()=>e(()=>b()>0)()?`(${b()})`:``)]}}),null),s(n,r(u,{class:`button btn-prime`,onClick:T,children:`登录`}),null),n}})},y=p(`<div class="w-64 m-auto flex flex-col pb-4"><label for=name>用户名</label><label for=phone>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`),b=/^[_\w-]+$/,x=/^\+\d+$/,S=({go:e,name:t,setName:i,showTips:o,tips:l})=>{let[p,h]=f(``),g=()=>{e(`#signin`)},_=async()=>{if(!b.test(t()))return o(`Name can only include _, letter, number and -`);let r=p().replaceAll(/[() -]/g,``);if(!x.test(r))return o(`Invalid phone number!`);try{switch((await a(r,t())).status){case n.BadRequest:return o(`用户名已注册`);case n.Conflict:return o(`电话号码已注册`);case n.OK:return o(`注册成功，请登录`),e(`#signin`);default:o(`未知数服务器错误`)}}catch{o(`网络错误`)}};return r(d,{tips:l,class:`p-2 flex flex-col`,title:`注册`,get left(){return r(c,{class:`text-[150%] icon--material-symbols icon--material-symbols--chevron-left align-bottom`,onClick:()=>e(`#about`)})},get children(){var e=y(),n=e.firstChild.nextSibling,a=n.nextSibling;return a.firstChild,s(e,r(m,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:[t,i],class:`mb-3`}),n),s(e,r(m,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:[p,h],class:`mb-3`}),a),s(a,r(c,{class:`btn-anchor font-bold`,onClick:g,children:`登录`}),null),s(e,r(u,{class:`button btn-prime py-1`,onClick:_,children:`注册`}),null),e}})},C=()=>{let[e,n]=f(`#about`),[i,a]=f(``),[o,s]=f(``),c,l=e=>n(e??`#about`),u=()=>s(``),d=(e,t=!0)=>{s(e),t&&(c&&clearTimeout(c),c=setTimeout(u,3e3))},p=new Map;return p.set(`#about`,()=>r(h,{go:l})),p.set(`#signup`,()=>r(S,{go:l,name:i,setName:a,showTips:d,tips:o})),p.set(`#signin`,()=>r(v,{go:l,name:i,setName:a,showTips:d,tips:o})),r(t,{get component(){return p.get(e())}})};o(()=>r(C,{}),document.getElementById(`root`));